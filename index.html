<!DOCTYPE html>
<html>
<head>
  <title>IFBT Solutions AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Comic Sans MS', 'Comic Sans', cursive;
      background-color: #ff0000;
      overflow-y: scroll;
    }
    .chat-container {
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
      border-radius: 10px;
      background-color: #000348;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      transform: translateY(38px);
      z-index: 0;
    }
    .chat-box {
      height: 400px;
      overflow-y: auto;
      border-top-left-radius: 10px;
      padding: 10px;
      background-color: #00001c;
      border: 2px solid rgb(197, 0, 141);
      scrollbar-width: thin;
      scrollbar-color: black;
      box-shadow: 0 0 10px 1px fuchsia;
    }
    .chat-box div {
      margin: 10px 0;
    }
    .question {
      font-weight: bold;
      color: #ff4747;
    }
    .answer {
      margin-left: 20px;
      color: #88c9ff;
    }
    .input-box {
      margin-top: 20px;
    }
    .input-box input[type="text"] {
      width: calc(100% - 100px);
      padding: 20px;
      border-radius: 20px;
      background: linear-gradient(45deg, fuchsia, #6a77ff, cyan, green, yellow, orange red);
    }
    
    .submit-btn {
      padding: 10px 20px;
      border-radius: 20px;
      border: none;
      background-color: #87ceeb;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.3s;
    }
    .submit-btn:hover {
      background-color: #4682b4;
      transform: scale(1.1);
    }
    .mb-4{
      font-size: 25px;
      font-family: "Poppins", serif;
      font-weight: 700;
      color: #fff;
    }
    .input-box input[type="submit"] {
      padding: 10px 20px;
      border-radius: 20px;
      border: none;
      background-color: #008979;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .input-box input[type="submit"]:hover {
      background-color: #00c361;
      box-shadow: 0 0 10px 2px rgb(0, 102, 255);
    }
    .button-box {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
    }
    .button-box>*:last-child{
      float: right;
    }
    .button-box button {
      padding: 10px 20px;
      border-radius: 20px;
      border: none;
      background-color: #42008e;
      color: #fff;
      cursor: pointer;
      transition: 0.4s;
      margin: 5px;
    }
    .button-box button:hover {
      box-shadow: 0 0 10px 2px fuchsia;
    }

  </style>
  <style>
    *
    {
      font-family: 'Poppins', sans-serif;
    }
  
    :root
    {
      --clr: #00092f;
      --white: #fff;
    }
    .greet{
      background-image: linear-gradient(to right, fuchsia, #77f, cyan);
      font-size: 25px;
      background-clip: text;
      color: transparent;
    }
    body
    {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: var(--clr);
      flex-direction: column;
    }
    pre{
      background-color: rgb(0, 0, 0);
      color: #fff;
      font-family: monospace;
      overflow: auto;
      scrollbar-width: thin;
      scrollbar-color: black;
      box-shadow: 0 0 4px 2px cornflowerblue;
      padding: 10px;
      margin-top: 10px;
    }
    .footer{
      width: 100%;
      background-color: rgb(0, 14, 96);
      bottom: 0;
      position: fixed;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .navigation
    {
      position: fixed;
      width: 100%;
      height: 70px; 
      background: var(--white);
      display: flex;
      justify-content: center;
      align-items: center;
      background-repeat: 10px;
      top: 30px;
      padding: 30px;
      z-index: 1;
    }
  
    .navigation ul
    {
      display: flex;
      width: 350px;
      list-style: none; /* Remove bullet points */
    }
  
    .navigation ul li
    {
      position: relative;
      width: 70px;
      height: 70px;
      z-index: 1;
    }
  
    .navigation ul li a
    {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      width: 100%;
      text-align: center;
      font-weight: 500;
    }
  
    .navigation ul li a .icon
    {
      position: relative;
      display: block;
      line-height: 75px;
      font-size: 1.5em;
      text-align: center;
      transition: 0.5s;
      color: var(--clr);
    }
  
    .navigation ul li.active a .icon
    {
      transform: translateY(-32px);
    }
  
    .navigation ul li a .text
    {
      position: absolute;
      color: var(--clr);
      font-weight: 400;
      font-size: 0.75em;
      letter-spacing: 0.05em;
      transition: 0.5s;
      opacity: 0;
      transform: translateY(20px);
    }
  
    .navigation ul li.active a .text
    {
      opacity: 1;
      transform: translateY(20px);
    }
  
    .indicator
    {
      position: absolute;
      top: -50%;
      width: 70px; /* Ensure indicator matches list item width */
      height: 70px;
      background: #29fd53;
      border-radius: 50%;
      border: 6px solid var(--clr);
      transition: 0.5s;
    }
  
    .indicator::before
    {
      content: '';
      position: absolute;
      top: 50%;
      left: -22px;
      width: 20px;
      height: 20px;
      background: transparent;
      border-top-right-radius: 20px;
      box-shadow: 1px -10px 0 0 var(--clr);
    }
  
    .indicator::after
    {
      content: '';
      position: absolute;
      top: 50%;
      right: -23px;
      width: 20px;
      height: 20px;
      background: transparent;
      border-top-left-radius: 20px;
      box-shadow: -1px -10px 0 0 var(--clr);
    }
  
    /* Adjust indicator movement for correct position */
    .navigation ul li:nth-child(1).active ~ .indicator
    {
      transform: translateX(-3px);
    }
  
    .navigation ul li:nth-child(2).active ~ .indicator
    {
      transform: translateX(60px);
    }
  
    .navigation ul li:nth-child(3).active ~ .indicator
    {
      transform: translateX(calc(70px * 2 - 20px)); /* Adjusted for precise position */
    }
  
    .navigation ul li:nth-child(4).active ~ .indicator
    {
      transform: translateX(calc(70px * 3 - 28px)); /* Adjusted for precise position */
    }
  
    .navigation ul li:nth-child(5).active ~ .indicator
    {
      transform: translateX(calc(70px * 4 - 35px)); /* Adjusted for precise position */
    }
    .navigation::before{
      content: "";
      width: 200px;
      height: 100px;
      position: fixed;
      top: 0px;
      left: 0;
      background-color: var(--white);
      background-image: url("https://i.ibb.co/k8Fs3cz/image.png");
      background-size: 100px 100px;
      background-position: left;
      background-repeat: no-repeat;
    }
    .navigation::after{
      content: "";
      width: calc(100% - 200px);
      height: 30px;
      position: fixed;
      top: 0px;
      right: 0;
      background-color: rgba(255, 0, 0, 0);
      border-bottom-left-radius: 200px;
      box-shadow: 0 0 4px 40px var(--white);
      z-index: -1;
    }
    @font-face {
      font-family: 'IFBFont';
      src: url('CutOutsFLF.woff2') format('woff2');
    }
    .logo{
      position: fixed;
      top: 20px;
      left: 0px;
      margin-left: 100px;
      font-family: 'IFBFont';
      font-size: 40px;
    }
    .logo::after{
      content: 'Inventing Generations...';
      font-size: medium;
      position: absolute;
      width: 300%;
      height: 100%;
      top: 80%;
      left: 0px;
    }
  </style>
  <style>
    /* Base styles for the logo */
.logo {
  position: fixed;
  top: 20px;
  left: 0px;
  margin-left: 100px;
  font-family: 'IFBFont';
  font-size: 40px; /* Base font size for desktop */
  transition: font-size 0.3s, margin-left 0.3s;
}

/* Adjust the subtitle in the logo */
.logo::after {
  content: 'Inventing Generations...';
  font-size: medium;
  position: absolute;
  width: 300%;
  height: 100%;
  top: 80%;
  left: 0px;
  transition: font-size 0.3s;
}

/* Make the logo responsive on smaller screens */
@media (max-width: 768px) {
  .logo {
    font-size: 30px; /* Decrease font size for tablets */
   
    margin-top: 20px;
  }

  .greet{
    font-size: 19px;
  }
  .navigation{
    justify-content: flex-end;
  }
  .navigation::before{
    width: 100px;
  }
  .navigation::after{
    width: calc(100% - 100px);
  }
  .logo::after {
    opacity: 0;
  }
}

@media (max-width: 600px) {
  .logo {
    font-size: 18px; /* Smaller font size for mobile */
    margin-left: 20px; /* Further adjust the margin */
    transform: translateX(-22px) translateY(55px);
    background-color: var(--white);
    border-radius: 20px;
    border-top-left-radius: 0px;
    padding: 0px 10px 0px;
  }
  .button-box button{
    font-size: 9.98px;
    
  }
  .input-box input[type="text"] {
    padding: 15px;
    width: 78%;
  }
  .input-box input[type="submit"] {
    width: 20%;
    text-align: center;
    padding: 8px 10px;
  }
  .button-box{
    justify-content: center;
  }
  .logo::after {
    opacity: 0;
  }
  .navigation {
    flex-direction: row-reverse;
  }
  .navigation::after{
    width: 100%;
    z-index: -1;
  }
  .navigation::before{
    transform: translateY(30px) translateX(-0px);
    height: 67px;
    width: 67px;
    background-size: 140% 140%;
    background-position: center;
    border-radius: 50%;
  }
}

  </style>
</head>
<body>
  <div class="navigation">
    <span class="logo">IFBT</span>
    <ul>
      <li class="list active">
        <a href="#">
          <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
          <span class="text">Home</span>
        </a>
      </li>
      <li class="list">
        <a href="https://dheeraj-nayak-2009.github.io/portfolio/">
          <span class="icon"><ion-icon name="person-outline"></ion-icon></span>
          <span class="text">Profile</span>
        </a>
      </li>
      <li class="list">
        <a href="#">
          <span class="icon"><ion-icon name="chatbubble-outline"></ion-icon></span>
          <span class="text">Message</span>
        </a>
      </li>
      <li class="list">
        <a href="#">
          <span class="icon"><ion-icon name="camera-outline"></ion-icon></span>
          <span class="text">Photos</span>
        </a>
      </li>
      <li class="list">
        <a href="#">
          <span class="icon"><ion-icon name="settings-outline"></ion-icon></span>
          <span class="text">Settings</span>
        </a>
      </li>
      <div class="indicator"></div>
    </ul>
  </div>

  <div class="container chat-container">
    <div class="text-center mb-4">IFBT Solutions AI</div>
    
    <div class="chat-box" id="chat-box"><span class="greet">AI: Hi, how can I help you today?</span></div>
    <div class="input-box text-center">
      <input type="text" id="question" class="form-control d-inline" placeholder="Type your question here..." onkeypress="handleKeyPress(event)">
      <input type="submit" class="btn d-inline" value="Send" onclick="sendQuestion()">
    </div>
    <div class="button-box">
      <button onclick="clearChat()">Clear</button>
      <button onclick="downloadChat()">Download Chat</button>
      <button id="toggleScrollBtn">Start Auto Scroll</button>
    </div>
  </div>
  <footer class="footer">©️ 2024, IFBT | All Rights Reserved</footer>

  <script>
    // Function to reverse the string
    function reverseString(str) {
        return str.split('').reverse().join('');
    }

    // Variable to hold the correct API key
    let geminiToken = '';

    // Function to get the reversed API key from the file, reverse it, and store in geminiTokens
    function getReversedAPIKey() {
        fetch('api.txt')
            .then(response => response.text())
            .then(data => {
                // Reverse the content of the API key from the file
                geminiToken = reverseString(data.trim());

                // Log the API key (for testing purposes)
                console.log("Correct API key stored in geminiToken:", geminiToken);
            })
            .catch(error => {
                console.error("Error reading the file:", error);
            });
    }

    // Call the function to reverse and store the API key
    getReversedAPIKey();

    function typeAnswer(botAnswerDiv, answer) {
    let index = 0;
    let isTag = false;
    let tempAnswer = '';

    function type() {
        if (index < answer.length) {
            let currentChar = answer[index];
            if (currentChar === "<") isTag = true;
            if (currentChar === ">") isTag = false;

            tempAnswer += currentChar;
            index++;

            if (!isTag) {
                botAnswerDiv.innerHTML = tempAnswer;  // Update HTML only after each full tag or character is processed
            }

            setTimeout(type, isTag ? 0 : 5);  // Faster typing inside tags
        }
    }

    type();
}

async function sendQuestion() {
    const question = document.getElementById('question').value;
    if (!question) return;

    const chatBox = document.getElementById('chat-box');
    const userQuestionDiv = document.createElement('div');
    userQuestionDiv.className = 'question';
    userQuestionDiv.textContent = 'You: ' + question;
    chatBox.appendChild(userQuestionDiv);

    const payload = {
        contents: [{ parts: [{ text: "database: Your name: IFBT Solutions AI; you are trained by IFBT; IFBT: Institute of Fast Brain Technologies;" + "\n based on the database: your prompt: " + question }] }],
        generationConfig: { maxOutputTokens: 10000 }
    };

    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${geminiToken}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
    });

    if (response.ok) {
        const result = await response.json();
        let answer = result.candidates[0].content.parts[0].text;

        // Replace **text** with <b>text</b> for bold formatting
        answer = answer.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');

        // Process triple backticks and remove the word immediately following them
        answer = answer.replace(/```(\w+)?\n?([\s\S]*?)```/g, '<pre><code>$2</code></pre>'); // Capture content between triple backticks

        // Replace `text` with <i>text</i> for italics, but avoid replacing inside <pre><code> blocks
        answer = answer.replace(/`([^`]+)`(?![^<]*<\/code>)/g, '<i>$1</i>');

        // Escape any remaining HTML tags for display purposes
        answer = answer.replace(/</g, "&lt;").replace(/>/g, "&gt;");

        // Restore <b>, <i>, and <pre><code> tags after escaping
        answer = answer.replace(/&lt;b&gt;/g, '<b>').replace(/&lt;\/b&gt;/g, '</b>');
        answer = answer.replace(/&lt;i&gt;/g, '<i>').replace(/&lt;\/i&gt;/g, '</i>');
        answer = answer.replace(/&lt;pre&gt;&lt;code&gt;/g, '<pre><code>').replace(/&lt;\/code&gt;&lt;\/pre&gt;/g, '</code></pre>');

        const botAnswerDiv = document.createElement('div');
        botAnswerDiv.className = 'answer';
        chatBox.appendChild(botAnswerDiv);

        // Call the typing effect function to type the answer
        typeAnswer(botAnswerDiv, 'AI: ' + answer);

        chatBox.scrollTop = chatBox.scrollHeight;  // Scroll to the bottom
        document.getElementById('question').value = '';  // Clear the input field
    } else {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'answer text-danger';
        errorDiv.textContent = 'Error: Unable to get a response from the API';
        chatBox.appendChild(errorDiv);
    }
}





  function handleKeyPress(event) {
    if (event.key === 'Enter') {
      sendQuestion();
    }
  }

  function clearChat() {
    const chatBox = document.getElementById('chat-box');
    chatBox.innerHTML = '';
  }

  function downloadChat() {
    const chatBox = document.getElementById('chat-box');
    const chatText = chatBox.innerText;
    const blob = new Blob([chatText], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'chat.txt';
    a.click();
    URL.revokeObjectURL(url);
  }

  // Get all list items in the navigation
  const navItems = document.querySelectorAll('.navigation ul li a');

  navItems.forEach(item => {
    item.addEventListener('click', function(event) {
      event.preventDefault(); // Prevent immediate redirect
      
      const link = this.getAttribute('href'); // Get the href value for redirection
      
      // Add a 1-second delay before redirecting
      setTimeout(() => {
        window.location.href = link;
      }, 1000); // 1000 milliseconds = 1 second
    });
  });

  // Activate navigation links
  const list = document.querySelectorAll('.list');

  function activeLink() {
    list.forEach(item => item.classList.remove('active'));
    this.classList.add('active');
  }

  list.forEach(item => item.addEventListener('click', activeLink));
</script>

  
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

   <script>
    const scrollContainer = document.getElementById('chat-box');
    const toggleScrollBtn = document.getElementById('toggleScrollBtn');
    
    let isScrolling = false;  // Track scrolling state
    let scrollInterval;

    // Function to auto-scroll
    function startAutoScroll() {
      scrollInterval = setInterval(() => {
        scrollContainer.scrollTop += 1;  // Adjust scroll speed by changing the number
        // If we've reached the bottom, stop scrolling
        if (scrollContainer.scrollTop + scrollContainer.clientHeight >= scrollContainer.scrollHeight) {
          clearInterval(scrollInterval);
          toggleScrollBtn.textContent = 'Start Auto Scroll';
          isScrolling = false;
        }
      }, 10);  // Adjust the interval speed (10ms in this case)
    }

    // Function to toggle auto-scroll
    function toggleAutoScroll() {
      if (isScrolling) {
        clearInterval(scrollInterval);
        toggleScrollBtn.textContent = 'Start Auto Scroll';
      } else {
        startAutoScroll();
        toggleScrollBtn.textContent = 'Stop Auto Scroll';
      }
      isScrolling = !isScrolling;
    }

    // Add click event listener to the button
    toggleScrollBtn.addEventListener('click', toggleAutoScroll);
  </script>
</body>
</html>
